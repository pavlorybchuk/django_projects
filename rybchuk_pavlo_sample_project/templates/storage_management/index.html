<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <title>Склад іграшок</title>
    {% load static %}
    <link
      rel="stylesheet"
      href="{% static 'storage_management/css/styles_index.css' %}"
    />
  </head>
  <body>
    <h1>Список товарів на складі</h1>
    {% if messages %}
    <div class="messages">
      {% for message in messages %}
      <div class="msg {{ message.tags }}">{{ message }}</div>
      {% endfor %}
    </div>
    {% endif %}
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Назва</th>
          <th>Категорія</th>
          <th>Вікова категорія</th>
          <th>Матеріал</th>
          <th>Бренд</th>
          <th>Ціна (грн)</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for p in products %}
        <tr>
          <td>{{ p.uuid }}</td>
          <td>{{ p.name }}</td>
          <td>{{ p.category.full_path }}</td>
          <td>{{ p.age_category }}</td>
          <td>{{ p.material }}</td>
          <td>{{ p.brand }}</td>
          <td>{{ p.price }}</td>
          <td>
            <button class="table-btn change-btn" data-prod-id="{{ p.uuid }}">
              Змінити
            </button>
            <button class="table-btn del-btn" data-prod-id="{{ p.uuid }}">
              Видалити
            </button>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="8">Немає записів у базі</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <div class="aside-triger hidden" id="aside_trigger"></div>
    <div class="change-modal hidden" id="change_modal">
      <div>
        <h2>Змінити інформацію про іграшку</h2>
        <form
          id="change-form"
          class="change-form"
          action="{% url 'product_edit' 0 %}"
          method="post"
        >
          {% csrf_token %}
          <input type="hidden" name="prod_id" id="prod_id" value="" />
          <label for="name">Назва:</label><br />
          <input type="text" id="name" name="name" /><br />
          <label for="age_category">Вікова категорія:</label><br />
          <input type="text" id="age_category" name="age_category" /><br />
          <label for="material">Матеріал:</label><br />
          <input type="text" id="material" name="material" /><br />
          <label for="brand">Бренд:</label><br />
          <input type="text" id="brand" name="brand" /><br />
          <label for="price">Ціна (грн):</label><br />
          <input
            type="number"
            id="price"
            name="price"
            step="0.01"
          /><br /><br />
          <button type="submit">Зберегти зміни</button>
          <button type="button" id="close-modal">Скасувати</button>
        </form>
      </div>
    </div>
    <div class="change-modal hidden" id="delete_modal">
      <div>
        <h2>Ви точно хочете видалити продукт?</h2>
        <form
          id="delete-form"
          class="change-form"
          action="{% url 'product_delete' 0 %}"
          method="post"
        >
          {% csrf_token %}
          <input type="hidden" name="del_prod_id" id="del_prod_id" value="" />
          <button type="submit">Видалити</button>
          <button type="button" id="close-delete-modal">Скасувати</button>
        </form>
      </div>
    </div>

    <script src="{% static 'storage_management/js/script_index.js' %}"></script>
    <script src="{% static 'storage_management/js/message.js' %}"></script>
  </body>
</html>
